(function(){if(c){return}var c={};var h,k,a,e,d;c.options={layout:{"padding-top":1,"padding-right":1,"padding-bottom":1,"padding-left":1,"background-color":"#FFF","background-alpha":1,"logo-enabled":false,"logo-width":50,"logo-height":23,"logo-position":"top-right",speed:300,},grid:{"padding-top":10,"padding-right":10,"padding-bottom":10,"padding-left":10,"grid-width":1,"grid-color":"#CCC","grid-alpha":0.5,"axis-width":1,"axis-color":"#999","axis-alpha":1,"axis-dot-size":2.4,"border-width":1,"border-color":"#AAA","border-alpha":1,"border-radius":4,"background-color":"#FFF","background-alpha":1,"vertical-label-margin":5,"vertical-label-spacing":40,"vertical-label-size":12,"vertical-label-color":"#555","vertical-name-size":12,"vertical-name-color":"#000","horizontal-label-margin":5,"horizontal-label-spacing":10,"horizontal-label-size":12,"horizontal-label-color":"#555","horizontal-name-size":12,"horizontal-name-color":"#000"},legend:{"legend-enabled":true,"legend-position":"top-left",width:undefined,height:undefined,"margin-top":10,"margin-right":10,"margin-bottom":10,"margin-left":10,"padding-top":5,"padding-right":8,"padding-bottom":5,"padding-left":8,"indicator-size":14,"indicator-border-width":1,"indicator-margin-left":0,"indicator-margin-right":10,"indicator-margin-top":2,"indicator-margin-bottom":2,"indicator-sector-angle":60,"label-color":undefined,"label-alpha":1,"label-size":12,"border-width":1,"border-color":"#CCC","border-alpha":1,"border-radius":4,"background-color":"#FDFDFD","background-alpha":1},tooltip:{"padding-top":6,"padding-right":8,"padding-bottom":6,"padding-left":8,"border-width":1,"border-color":"#CCC","border-alpha":1,"border-radius":4,"title-text-color":undefined,"title-text-alpha":1,"title-text-weight":"bold","title-text-size":12,"line-spacing":2,"hide-after":5000,"content-text-color":"#999","content-text-alpha":1,"content-text-weight":"normal","content-text-size":12,"background-color":"#FDFDFD","background-alpha":1,"horizontal-offset":0,"vertical-offset":-10},linechart:{"padding-top":30,"padding-right":90,"padding-bottom":20,"padding-left":30,"line-width":2,"circle-radius":5,"custom-circle":undefined,"label-size":12,"vertical-label-count":10,"vertical-bar-width":5},bubblechart:{"padding-top":40,"padding-right":100,"padding-bottom":40,"padding-left":60,"circle-border-width":2,"circle-min-radius":15,"circle-max-radius":40,"label-size":12,"horizontal-label-count":10,"horizontal-bar-width":5,"vertical-label-count":5,"vertical-bar-width":5},barchart:{"padding-top":30,"padding-right":30,"padding-bottom":20,"padding-left":30,"group-margin":40,"bar-margin":4,"vertical-label-count":10,"vertical-bar-width":5},piechart:{"size-factor":0.9,"sector-border-width":1,"hole-radius":0,"label-size":11,"label-distance":5,"label-bar-width":1,"label-bar-color":"#555","label-bar-alpha":1,"label-bar-length1":5,"label-bar-length2":10,"horizontal-offset":0,"vertical-offset":0},radarchart:{"size-factor":0.9,"outer-border-width":1,"outer-border-color":"#999","outer-border-alpha":1,"outer-background-color":"#FFF","outer-background-alpha":1,"inner-border-width":1,"inner-border-color":"#CCC","inner-border-alpha":1,"inner-background-color":"#F9F9F9","inner-background-alpha":1,"axis-width":2,"axis-color":"#999","axis-alpha":1,"circle-min-radius":30,"circle-border-width":2,"circle-background-alpha":0.1,"label-distance":15,"label-color":"#555","label-size":12,"label-rotation":false,"horizontal-offset":0,"vertical-offset":0},heatmap:{"horizontal-margin":4,"vertical-margin":4,"box-border-width":1,"label-size":12,"label-color":"#FFF","label-alpha":1,"horizontal-count":undefined,"vertical-count":undefined,color:[{color:"#339999","dark-alpha":1,"light-alpha":0.45},{color:"#99CC99","dark-alpha":1,"light-alpha":0.45},{color:"#99CC33","dark-alpha":1,"light-alpha":0.45},{color:"#CCCC33","dark-alpha":1,"light-alpha":0.45},{color:"#FFCC33","dark-alpha":1,"light-alpha":0.45},{color:"#FF6633","dark-alpha":1,"light-alpha":0.45},{color:"#FF3333","dark-alpha":1,"light-alpha":0.45},{color:"#CC0066","dark-alpha":1,"light-alpha":0.45}]},tagcloud:{levels:10,"text-min-size":10,"text-max-size":55,"row-count":5,"horizontal-margin":5,"vertical-margin":-10,color:[{color:"#339999","dark-alpha":1,"light-alpha":0.45},{color:"#99CC99","dark-alpha":1,"light-alpha":0.45},{color:"#99CC33","dark-alpha":1,"light-alpha":0.45},{color:"#CCCC33","dark-alpha":1,"light-alpha":0.45},{color:"#FFCC33","dark-alpha":1,"light-alpha":0.45},{color:"#FF6633","dark-alpha":1,"light-alpha":0.45},{color:"#FF3333","dark-alpha":1,"light-alpha":0.45},{color:"#CC0066","dark-alpha":1,"light-alpha":0.45}]},smithgraph:{"size-factor":0.9,"horizontal-offset":0,"vertical-offset":0},radialchart:{"size-factor":0.9,"bar-width":15,"bar-border-width":1,"bar-min-height":15,"hole-radius":50,"label-enabled":true,"label-size":11,"label-distance":5,"label-bar-width":1,"label-bar-color":"#555","label-bar-alpha":1,"label-bar-length1":5,"label-bar-length2":10,"horizontal-offset":0,"vertical-offset":0},color:[{color:"#66B3DD","dark-alpha":1,"light-alpha":0.45},{color:"#EF7D31","dark-alpha":1,"light-alpha":0.45},{color:"#ABC93C","dark-alpha":1,"light-alpha":0.45},{color:"#E05170","dark-alpha":1,"light-alpha":0.45},{color:"#297FB5","dark-alpha":1,"light-alpha":0.45},{color:"#F5BE21","dark-alpha":1,"light-alpha":0.45},{color:"#5ABABB","dark-alpha":1,"light-alpha":0.45},{color:"#9D66A4","dark-alpha":1,"light-alpha":0.45}]};c.chart=function(q,r,p,m,u){var v=$(q).attr("id")?$(q).attr("id"):"infoviz_"+i();$(q).attr("id",v);var n=Raphael(v,$(q).width(),$(q).height());var w=g(m);var l={"top-left":[w.layout["padding-left"],w.layout["padding-top"]],"top-right":[n.width-w.layout["padding-right"],w.layout["padding-top"]],"bottom-left":[w.layout["padding-left"],n.height-w.layout["padding-bottom"]],"bottom-right":[n.width-w.layout["padding-right"],n.height-w.layout["padding-bottom"]],width:n.width,height:n.height};n.rect(0,0,n.width,n.height).attr({stroke:"none",fill:w.layout["background-color"],"fill-opacity":w.layout["background-alpha"]});switch(r){case"linechart":l=c.draw_axis_background(n,p,w);c.draw_linechart(n,l,p,w,u);break;case"bubblechart":l=c.draw_axis_background(n,p,w);c.draw_bubblechart(n,l,p,w,u);break;case"barchart":l=c.draw_axis_background(n,p,w);c.draw_barchart(n,l,p,w,u);break;case"piechart":l=c.draw_empty_background(n,p,w);c.draw_piechart(n,l,p,w,u);break;case"radarchart":l=c.draw_empty_background(n,p,w);c.draw_radarchart(n,l,p,w,u);break;case"heatmap":l=c.draw_empty_background(n,p,w);c.draw_heatmap(n,l,p,w,u);break;case"tagcloud":l=c.draw_empty_background(n,p,w);c.draw_tagcloud(n,l,p,w,u);break;case"smithgraph":l=c.draw_empty_background(n,p,w);c.draw_smithgraph(n,l,p,w,u);break;case"radialchart":l=c.draw_empty_background(n,p,w);c.draw_radialchart(n,l,p,w,u);break;default:n.text(l.width/2,l.height/2,'Type "'+r+'" not supported.').attr({"font-size":12,fill:"#000"}).translate(0.5,0.5);break}if(w.layout["logo-enabled"]){var t,s;switch(w.layout["logo-position"]){default:case"top-right":t=l["top-right"][0]-w.layout["logo-width"];s=l["top-right"][1];break;case"top-left":t=l["top-left"][0];s=l["top-right"][1];break;case"bottom-left":t=l["bottom-left"][0];s=l["bottom-left"][1]-w.layout["logo-height"];break;case"bottom-right":t=l["bottom-right"][0]-w.layout["logo-width"];s=l["bottom-right"][1]-w.layout["logo-height"];break}var o=n.image("./images/infoviz_logo_tiny.png",t,s,w.layout["logo-width"],w.layout["logo-height"]).attr({cursor:"pointer"}).translate(0.5,0.5);o.click(function(){window.location.href="https://github.com/nocoo/InfoViz"})}};c.draw_empty_background=function(n,q,m){if(!n){return j("Paper is empty.")}var w=g(m),r={},v=n.width,p=n.height,l=[],u,t;var o=n.rect(0,0,v,p);o.attr({stroke:"none",fill:w.layout["background-color"],"fill-opacity":w.layout["background-alpha"]});var s=n.rect(w.layout["padding-left"],w.layout["padding-top"],v-w.layout["padding-left"]-w.layout["padding-right"],p-w.layout["padding-top"]-w.layout["padding-bottom"],w.grid["border-radius"]);s.attr({stroke:w.grid["border-color"],"stroke-width":w.grid["border-width"],"stroke-opacity":w.grid["border-alpha"],fill:w.grid["background-color"],"fill-opacity":w.grid["background-alpha"]});s.translate(0.5,0.5);u=w.layout["padding-left"]+w.grid["border-width"]+w.grid["padding-left"];t=p-w.layout["padding-bottom"]-w.grid["border-width"]-w.grid["padding-bottom"];r["bottom-left"]=[u,t];t=w.layout["padding-top"]+w.grid["border-width"]+w.grid["padding-top"];r["top-left"]=[u,t];u=v-w.layout["padding-right"]-w.grid["border-width"]-w.grid["padding-right"];t=r["top-left"][1];r["top-right"]=[u,t];t=r["bottom-left"][1];r["bottom-right"]=[u,t];r.width=r["top-right"][0]-r["top-left"][0];r.height=r["bottom-right"][1]-r["top-right"][1];return r};c.draw_axis_background=function(t,E,p){if(!t){return j("Paper is empty.")}var n=g(p),q={},B=t.width,o=t.height,w=[],s,r;var C=t.rect(0,0,B,o);C.attr({stroke:"none",fill:n.layout["background-color"],"fill-opacity":n.layout["background-alpha"]});var u=t.rect(n.layout["padding-left"],n.layout["padding-top"],B-n.layout["padding-left"]-n.layout["padding-right"],o-n.layout["padding-top"]-n.layout["padding-bottom"],n.grid["border-radius"]);u.attr({stroke:n.grid["border-color"],"stroke-width":n.grid["border-width"],"stroke-opacity":n.grid["border-alpha"],fill:n.grid["background-color"],"fill-opacity":n.grid["background-alpha"]});u.translate(0.5,0.5);s=n.layout["padding-left"]+n.grid["border-width"]+n.grid["padding-left"]+n.grid["vertical-label-margin"]+n.grid["vertical-label-spacing"]+n.grid["vertical-label-margin"];r=o-n.layout["padding-bottom"]-n.grid["border-width"]-n.grid["padding-bottom"]-n.grid["horizontal-label-margin"]-n.grid["horizontal-label-spacing"]-n.grid["horizontal-label-margin"];q["bottom-left"]=[s,r];r=n.layout["padding-top"]+n.grid["border-width"]+n.grid["padding-top"];q["top-left"]=[s,r];s=B-n.layout["padding-right"]-n.grid["border-width"]-n.grid["padding-right"];r=q["top-left"][1];q["top-right"]=[s,r];r=q["bottom-left"][1];q["bottom-right"]=[s,r];q.width=q["top-right"][0]-q["top-left"][0];q.height=q["bottom-right"][1]-q["top-right"][1];w=[];w.push("M"+q["bottom-left"][0]+","+q["bottom-left"][1]);w.push("L"+q["top-left"][0]+","+q["top-left"][1]);var F=t.path(w.join(""));F.attr({stroke:n.grid["axis-color"],"stroke-width":n.grid["axis-width"],"stroke-opacity":n.grid["axis-alpha"]});F.translate(0.5,0.5);w=[];w.push("M"+q["bottom-left"][0]+","+q["bottom-left"][1]);w.push("L"+q["bottom-right"][0]+","+q["bottom-right"][1]);var D=t.path(w.join(""));D.attr({stroke:n.grid["axis-color"],"stroke-width":n.grid["axis-width"],"stroke-opacity":n.grid["axis-alpha"]});D.translate(0.5,0.5);var z=t.circle(q["bottom-left"][0],q["bottom-left"][1],n.grid["axis-dot-size"]);z.attr({stroke:"none",fill:n.grid["axis-color"],"fill-opacity":n.grid["axis-alpha"]});z.translate(0.5,0.5);var l=t.circle(q["top-left"][0],q["top-left"][1],n.grid["axis-dot-size"]);l.attr({stroke:"none",fill:n.grid["axis-color"],"fill-opacity":n.grid["axis-alpha"]});l.translate(0.5,0.5);var v=t.circle(q["bottom-right"][0],q["bottom-right"][1],n.grid["axis-dot-size"]);v.attr({stroke:"none",fill:n.grid["axis-color"],"fill-opacity":n.grid["axis-alpha"]});v.translate(0.5,0.5);if(E.vertical_axis_name){s=q["top-left"][0]-n.grid["vertical-label-margin"]*2;r=q["top-left"][1]+n.grid["vertical-name-size"]/2;var m=t.text(s,r,E.vertical_axis_name);m.attr({"text-anchor":"end","font-weight":"bold","font-size":n.grid["vertical-name-size"],fill:n.grid["vertical-name-color"]})}if(E.horizontal_axis_name){s=q["bottom-right"][0];r=q["bottom-right"][1]+n.grid["horizontal-name-size"]/2+n.grid["horizontal-label-margin"]*2;var A=t.text(s,r,E.horizontal_axis_name);A.attr({"text-anchor":"end","font-weight":"bold","font-size":n.grid["horizontal-name-size"],fill:n.grid["horizontal-name-color"]})}return q};c.draw_legend=function(u,q,o,p){if(!u||!o){return j("Paper or Data is empty.")}var n=g(p),w=[],t,s,E,D,G;if(!n.legend["legend-enabled"]){return}var A=n.legend["width"],z=n.legend["height"];if(!A){var C,m,r=-Infinity;for(E=0;E<o.length;++E){G=o[E];C=u.text(-1000,-1000,G.label).attr({"font-size":n.legend["label-size"]}).translate(0.5,0.5);m=C.getBBox();if(m.width>r){r=m.width}}A=r+n.legend["padding-left"]+n.legend["padding-right"]+n.legend["indicator-margin-left"]+n.legend["indicator-margin-right"]+n.legend["indicator-size"]}if(!z){z=n.legend["padding-top"]+n.legend["padding-bottom"];for(E=0;E<o.length;++E){z+=n.legend["indicator-margin-top"]+n.legend["indicator-margin-bottom"]+n.legend["indicator-size"]}}switch(n.legend["legend-position"]){default:case"top-right":t=q["top-right"][0]-A-n.legend["margin-right"];s=q["top-right"][1]+n.legend["margin-top"];break;case"top-left":t=q["top-left"][0]+n.legend["margin-left"];s=q["top-right"][1]+n.legend["margin-top"];break;case"bottom-left":t=q["bottom-left"][0]+n.legend["margin-left"];s=q["bottom-left"][1]-z-n.legend["margin-bottom"];break;case"bottom-right":t=q["bottom-right"][0]-A-n.legend["margin-right"];s=q["bottom-left"][1]-z-n.legend["margin-bottom"];break}var v=u.rect(t,s,A,z,n.legend["border-radius"]).attr({stroke:n.legend["border-color"],"stroke-opacity":n.legend["border-alpha"],"stroke-width":n.legend["border-width"],fill:n.legend["background-color"],"fill-opacity":n.legend["background-alpha"]}).translate(0.5,0.5);var l=[],B=[];var I,H;t+=n.legend["padding-left"];s+=n.legend["padding-top"];for(E=0;E<o.length;++E){G=o[E];switch(G.type){default:case"box":I=u.rect(t+n.legend["indicator-margin-left"],s+n.legend["indicator-margin-top"],n.legend["indicator-size"],n.legend["indicator-size"]).attr({fill:G.color["color"],"fill-opacity":G.color["light-alpha"],stroke:G.color["color"],"stroke-opacity":G.color["dark-alpha"],"stroke-width":n.legend["indicator-border-width"]}).translate(0.5,0.5);break;case"line":w=[];w.push("M"+(t+n.legend["indicator-margin-left"])+","+(s+n.legend["indicator-margin-top"]+n.legend["indicator-size"]));w.push("L"+(t+n.legend["indicator-margin-left"]+2*n.legend["indicator-size"]/5)+","+(s+n.legend["indicator-margin-top"]+2*n.legend["indicator-size"]/5));w.push("L"+(t+n.legend["indicator-margin-left"]+3*n.legend["indicator-size"]/4)+","+(s+n.legend["indicator-margin-top"]+5*n.legend["indicator-size"]/7));w.push("L"+(t+n.legend["indicator-margin-left"]+n.legend["indicator-size"])+","+(s+n.legend["indicator-margin-top"]));I=u.path(w.join("")).attr({stroke:G.color["color"],"stroke-opacity":G.color["dark-alpha"],"stroke-width":n.legend["indicator-border-width"]}).translate(0.5,0.5);break;case"node":I=u.circle(t+n.legend["indicator-margin-left"]+n.legend["indicator-size"]/2,s+n.legend["indicator-margin-top"]+n.legend["indicator-size"]/2,n.legend["indicator-size"]/2).attr({fill:G.color["color"],"fill-opacity":G.color["dark-alpha"],stroke:G.color["color"],"stroke-opacity":G.color["dark-alpha"],"stroke-width":n.legend["indicator-border-width"]}).translate(0.5,0.5);break;case"sector":var F=n.legend["indicator-sector-angle"]*Math.PI/180;w=[];w.push("M"+(t+n.legend["indicator-margin-left"])+","+(s+n.legend["indicator-margin-top"]+n.legend["indicator-size"]));w.push("L"+(t+n.legend["indicator-margin-left"]+Math.cos(F)*n.legend["indicator-size"])+","+(s+n.legend["indicator-margin-top"]));w.push("A"+n.legend["indicator-size"]+","+n.legend["indicator-size"]+", 0, 0, 1,"+(t+n.legend["indicator-margin-left"]+n.legend["indicator-size"])+","+(s+n.legend["indicator-margin-top"]+n.legend["indicator-size"]));w.push("L"+(t+n.legend["indicator-margin-left"])+","+(s+n.legend["indicator-margin-top"]+n.legend["indicator-size"]));w.push("Z");I=u.path(w.join("")).attr({fill:G.color["color"],"fill-opacity":G.color["light-alpha"],stroke:G.color["color"],"stroke-opacity":G.color["dark-alpha"],"stroke-width":n.legend["indicator-border-width"]}).translate(0.5,0.5);break;case"circle":I=u.circle(t+n.legend["indicator-margin-left"]+n.legend["indicator-size"]/2,s+n.legend["indicator-margin-top"]+n.legend["indicator-size"]/2,n.legend["indicator-size"]/2).attr({fill:G.color["color"],"fill-opacity":G.color["light-alpha"],stroke:G.color["color"],"stroke-opacity":G.color["dark-alpha"],"stroke-width":n.legend["indicator-border-width"]}).translate(0.5,0.5);break}l.push(I);H=u.text(t+n.legend["indicator-margin-left"]+n.legend["indicator-margin-right"]+n.legend["indicator-size"],s+n.legend["indicator-margin-top"]+n.legend["indicator-size"]/2,G.label).attr({"text-anchor":"start",fill:n.legend["label-color"]?n.legend["label-color"]:G.color["color"],"fill-opacity":n.legend["label-alpha"],"font-size":n.legend["label-size"]}).translate(0.5,0.5);s+=n.legend["indicator-size"]+n.legend["indicator-margin-top"]+n.legend["indicator-margin-bottom"]}};c.draw_tooltip=function(p,B,z,l,A,u,s,m){if(l===e){return}var D=g(m);var w,t,v=0,C=0,o=0,r=0;b(D);e=l;w=p.text(-1000,-1000,A).attr({"font-weight":D.tooltip["title-text-weight"],"font-size":D.tooltip["title-text-size"]}).translate(0.5,0.5);t=w.getBBox();v=t.width;C=t.height;w=p.text(-1000,-1000,u).attr({"font-weight":D.tooltip["content-text-weight"],"font-size":D.tooltip["content-text-size"]}).translate(0.5,0.5);t=w.getBBox();o=t.width;r=t.height;var q=(v>o)?v:o;var n=C+r;q+=D.tooltip["padding-left"]+D.tooltip["padding-right"];n+=D.tooltip["padding-top"]+D.tooltip["padding-bottom"]+D.tooltip["line-spacing"];B-=(q/2)+D.tooltip["horizontal-offset"];if(D.tooltip["vertical-offset"]<=0){z-=(n-D.tooltip["vertical-offset"])}else{z+=n+D.tooltip["vertical-offset"]}if(B<D.layout["padding-left"]){B=D.layout["padding-left"]}if(B+q>p.width-D.layout["padding-right"]){B=p.width-D.layout["padding-right"]-q}if(z<D.layout["padding-top"]){z=D.layout["padding-top"]}if(z+n>p.height-D.layout["padding-bottom"]){z=p.height-D.layout["padding-bottom"]-n}h=p.rect(B,z,q,n,D.tooltip["border-radius"]).attr({stroke:D.tooltip["border-color"],"stroke-width":D.tooltip["border-width"],"stroke-opacity":D.tooltip["border-alpha"],fill:D.tooltip["background-color"],"fill-opacity":D.tooltip["background-alpha"],opacity:0}).translate(0.5,0.5);k=p.text(B+D.tooltip["padding-left"],z+D.tooltip["padding-top"]+C/2,A).attr({fill:D.tooltip["title-text-color"]?D.tooltip["title-text-color"]:s.color,"font-size":D.tooltip["title-text-size"],"text-anchor":"start","font-weight":D.tooltip["title-text-weight"],"fill-opacity":D.tooltip["title-text-alpha"],opacity:0}).translate(0.5,0.5);a=p.text(B+D.tooltip["padding-left"],z+D.tooltip["padding-top"]+r+D.tooltip["line-spacing"]+r/2,u).attr({fill:D.tooltip["content-text-color"],"font-size":D.tooltip["content-text-size"],"text-anchor":"start","font-weight":D.tooltip["content-text-weight"],"fill-opacity":D.tooltip["content-text-alpha"],opacity:0}).translate(0.5,0.5);h.stop();k.stop();a.stop();h.animate({opacity:1},D.layout["speed"]);k.animate({opacity:1},D.layout["speed"]);a.animate({opacity:1},D.layout["speed"]);clearTimeout(d);if(D.tooltip["hide-after"]){d=setTimeout(function(){b()},D.tooltip["hide-after"])}};c.draw_linechart=function(m,A,af,K,W,U){if(!m||!af){return j("Paper or Data is empty.")}var G=g(K),B=[],X,V;var R=af.data,E=[],H=[],ae,ad,ac,N;var J=af.horizontal_field,n=af.vertical_field;var q,ag,I=Infinity,ai=-Infinity,S=Infinity,v=-Infinity;var O=function(p){W.call(U,this.data("info"))};var L=function(p){X=this.data("tooltip")["node_x"];V=this.data("tooltip")["node_y"];c.draw_tooltip(m,X,V,this.data("tooltip")["id"],this.data("tooltip")["title"],this.data("tooltip")["content"],this.data("tooltip")["color"],G)};for(var w in R){for(ae=0;ae<R[w]["data"].length;++ae){N=R[w]["data"][ae];if(N[J]){q=N[J]}else{q="N/A"}if(q>ai){ai=q}if(q<I){I=q}if(f(q,E)===-1){E.push(q)}if(N[n]){ag=N[n]}else{ag="N/A"}if(ag>v){v=ag}if(ag<S){S=ag}if(f(ag,H)===-1){H.push(ag)}}}S=Math.floor(S/10)*10;v=Math.ceil(v/10)*10;var Z=A["top-left"][0]+G.linechart["padding-left"];var F=(A["top-right"][0]-G.linechart["padding-right"]-Z)/(E.length-1);var ab=A["bottom-left"][1]-G.linechart["padding-bottom"];var T=(ab-A["top-left"][1]-G.linechart["padding-top"])/(v-S);var o={};var C=(ab-A["top-left"][1]-G.linechart["padding-top"])/(G.linechart["vertical-label-count"]-1);var t=Math.floor((v-S)/(G.linechart["vertical-label-count"]-1));B=[];X=A["top-left"][0]-G.linechart["vertical-bar-width"];V=ab;var r=S;for(ae=0;ae<G.linechart["vertical-label-count"];++ae){B.push("M"+X+","+V+"L"+A["top-left"][0]+","+V);m.path(B.join("")).attr({stroke:G.grid["axis-color"],"stroke-opacity":G.grid["axis-alpha"],"stroke-width":G.grid["axis-width"]}).translate(0.5,0.5);m.text(X-G.linechart["vertical-bar-width"],V,r).attr({"text-anchor":"end",fill:G.grid["vertical-label-color"],"font-size":G.grid["vertical-label-size"]}).translate(0.5,0.5);V-=C;r+=t}var u;B=[];X=Z;V=A["bottom-right"][1]+G.grid["horizontal-name-size"]/2+G.grid["horizontal-label-margin"]*2;for(ae=0;ae<E.length;++ae){B.push("M"+X+","+A["bottom-left"][1]);B.push("L"+X+","+A["top-left"][1]);o[E[ae]]=X;m.text(X,V,E[ae]).attr({"text-anchor":"middle","font-size":G.grid["horizontal-label-size"],fill:G.grid["horizontal-label-color"]}).translate(0.5,0.5);X+=F}u=m.path(B.join(""));u.attr({stroke:G.grid["grid-color"],"stroke-dasharray":"--..","stroke-linecap":"butt","stroke-width":G.grid["grid-width"],"stroke-opacity":G.grid["grid-alpha"]});u.translate(0.5,0.5);var Q=0,M;var Y=[];for(var w in R){var l,D,s,ah=[];B=[];M=G.color[(Q%G.color.length)];for(ae=0;ae<R[w]["data"].length;++ae){N=R[w]["data"][ae];X=o[N[J]];V=ab-N[n]*T+G.linechart["circle-radius"];if(ae===0){B.push("M"+X+","+V)}else{B.push("L"+X+","+V)}ah.push({x:X,y:V,v_value:N[n],h_value:N[J],data:N})}l=m.path(B.join(""));l.attr({stroke:M.color,"stroke-opacity":M["light-alpha"],"stroke-width":G.linechart["line-width"]}).translate(0.5,0.5);s=m.text(X+G.linechart["circle-radius"]*2,V,R[w]["name"]);s.attr({fill:M.color,"text-anchor":"start","font-size":G.linechart["label-size"]}).translate(0.5,0.5);for(ae=0;ae<ah.length;++ae){if(G.linechart["custom-circle"]){D=m.image(G.linechart["custom-circle"],ah[ae]["x"]-G.linechart["circle-radius"],ah[ae]["y"]-G.linechart["circle-radius"],G.linechart["circle-radius"]*2,G.linechart["circle-radius"]*2).attr({cursor:"pointer"}).translate(0.5,0.5)}else{D=m.circle(ah[ae]["x"],ah[ae]["y"],G.linechart["circle-radius"]).attr({stroke:M.color,"stroke-opacity":M["dark-alpha"],"stroke-width":G.linechart["line-width"],fill:M.color}).translate(0.5,0.5)}if(W&&typeof(W)==="function"){D.data("info",{data:ah[ae]["data"],x:ah[ae]["x"],y:ah[ae]["y"],v_value:ah[ae]["v_value"],h_value:ah[ae]["h_value"]});D.click(O)}if(af.tooltip_title||af.tooltip_content){var P=af.tooltip_title;var z=af.tooltip_content;for(var aa in ah[ae]["data"]){P=P.replace("{"+aa+"}",ah[ae]["data"][aa]);z=z.replace("{"+aa+"}",ah[ae]["data"][aa])}D.data("tooltip",{id:w+ae,title:P,content:z,color:M,node_x:ah[ae]["x"],node_y:ah[ae]["y"]});D.hover(L)}}Y.push({label:R[w]["name"],color:M,type:"line"});Q++}c.draw_legend(m,A,Y,G)};c.draw_barchart=function(m,z,ah,J,W,U){if(!m||!ah){return j("Paper or Data is empty.")}var F=g(J),A=[],X,V,ad=0;var Q=ah.data,D=[],G=[],ag,af,ae,M;var I=ah.horizontal_field,n=ah.vertical_field;var q,ai,H=Infinity,aj=-Infinity,S=Infinity,u=-Infinity;var N=function(p){W.call(U,this.data("info"))};var K=function(p){X=this.data("tooltip")["bar_top_x"];V=this.data("tooltip")["bar_top_y"];c.draw_tooltip(m,X,V,this.data("tooltip")["id"],this.data("tooltip")["title"],this.data("tooltip")["content"],this.data("tooltip")["color"],F)};for(var v in Q){for(ag=0;ag<Q[v]["data"].length;++ag){M=Q[v]["data"][ag];if(M[I]){q=M[I]}else{q="N/A"}if(q>aj){aj=q}if(q<H){H=q}if(f(q,D)===-1){D.push(q)}if(M[n]){ai=M[n]}else{ai="N/A"}if(ai>u){u=ai}if(ai<S){S=ai}if(f(ai,G)===-1){G.push(ai)}}++ad}S=Math.floor(S/10)*10;u=Math.ceil(u/10)*10;var aa=z["top-left"][0]+F.barchart["padding-left"];var ac=z["bottom-left"][1]-F.barchart["padding-bottom"];var T=(ac-z["top-left"][1]-F.barchart["padding-top"])/(u-S);var o={};var B=(ac-z["top-left"][1]-F.barchart["padding-top"])/(F.barchart["vertical-label-count"]-1);var s=Math.floor((u-S)/(F.barchart["vertical-label-count"]-1));A=[];X=z["top-left"][0]-F.barchart["vertical-bar-width"];V=ac;var r=S;for(ag=0;ag<F.barchart["vertical-label-count"];++ag){A.push("M"+X+","+V+"L"+z["top-left"][0]+","+V);m.path(A.join("")).attr({stroke:F.grid["axis-color"],"stroke-opacity":F.grid["axis-alpha"],"stroke-width":F.grid["axis-width"]}).translate(0.5,0.5);m.text(X-F.barchart["vertical-bar-width"],V,r).attr({"text-anchor":"end",fill:F.grid["vertical-label-color"],"font-size":F.grid["vertical-label-size"]}).translate(0.5,0.5);V-=B;r+=s}var E=(z.width-F.barchart["padding-left"]-F.barchart["padding-right"]-(D.length-1)*F.barchart["group-margin"])/D.length;var R=(E-(ad-1)*F.barchart["bar-margin"])/ad;var t;A=[];X=aa+E/2;V=z["bottom-right"][1]+F.grid["horizontal-name-size"]/2+F.grid["horizontal-label-margin"]*2;for(ag=0;ag<D.length;++ag){A.push("M"+X+","+z["bottom-left"][1]);A.push("L"+X+","+z["top-left"][1]);o[D[ag]]=X-E/2;m.text(X,V,D[ag]).attr({"text-anchor":"middle","font-size":F.grid["horizontal-label-size"],fill:F.grid["horizontal-label-color"]}).translate(0.5,0.5);X+=E+F.barchart["group-margin"]}t=m.path(A.join(""));t.attr({stroke:F.grid["grid-color"],"stroke-dasharray":"--..","stroke-linecap":"butt","stroke-width":F.grid["grid-width"],"stroke-opacity":F.grid["grid-alpha"]});t.translate(0.5,0.5);var P=0,L,l=[],Z;var Y=[];for(var v in Q){var C;L=F.color[(P%F.color.length)];for(ag=0;ag<Q[v]["data"].length;++ag){M=Q[v]["data"][ag];X=o[M[I]]+(P)*(R+F.barchart["bar-margin"]);V=ac-M[n]*T;Z=m.rect(X,V,R,z["bottom-left"][1]-V-1);Z.attr({stroke:L.color,"stroke-opacity":L["dark-alpha"],"stroke-width":F.barchart["line-width"],fill:L.color,"fill-opacity":L["light-alpha"]}).translate(0.5,0.5);l.push(Z);if(W&&typeof(W)==="function"){Z.data("info",{x:X,y:V,h_value:M[I],v_value:M[n],data:M});Z.click(N)}if(ah.tooltip_title||ah.tooltip_content){var O=ah.tooltip_title;var w=ah.tooltip_content;for(var ab in M){O=O.replace("{"+ab+"}",M[ab]);w=w.replace("{"+ab+"}",M[ab])}Z.data("tooltip",{id:v+ag,title:O,content:w,color:L,bar_top_x:X,bar_top_y:V});Z.hover(K)}}Y.push({label:Q[v]["name"],color:L,type:"box"});P++}c.draw_legend(m,z,Y,F);for(ag=0;ag<l.length;++ag){(function(p){p.mouseover(function(){p.stop().animate({"fill-opacity":F.color[0]["dark-alpha"]},F.layout["speed"],">")});p.mouseout(function(){p.stop().animate({"fill-opacity":F.color[0]["light-alpha"]},F.layout["speed"],"<")})})(l[ag])}};c.draw_bubblechart=function(m,z,ae,K,W,S){if(!m||!ae){return j("Paper or Data is empty.")}var H=g(K),A=[],ad,Y,V,v,N;var I=Infinity,ah=-Infinity,Q=Infinity,u=-Infinity,n=-Infinity,M=Infinity;var O=function(p){W.call(S,this.data("info"))};var L=function(p){Y=this.data("tooltip")["x"];V=this.data("tooltip")["y"];c.draw_tooltip(m,Y,V,this.data("tooltip")["id"],this.data("tooltip")["title"],this.data("tooltip")["content"],this.data("tooltip")["color"],H)};for(ad=0;ad<ae.data.length;++ad){N=ae.data[ad];if(N[ae.horizontal_field]>ah){ah=N[ae.horizontal_field]}if(N[ae.horizontal_field]<I){I=N[ae.horizontal_field]}if(N[ae.vertical_field]>u){u=N[ae.vertical_field]}if(N[ae.vertical_field]<Q){Q=N[ae.vertical_field]}if(N[ae.size_field]>n){n=N[ae.size_field]}if(N[ae.size_field]<M){M=N[ae.size_field]}}I=Math.floor(I/10)*10;ah=Math.ceil(ah/10)*10;Q=Math.floor(Q/10)*10;u=Math.ceil(u/10)*10;var aa=z["top-left"][0]+H.bubblechart["padding-left"];var G=(z["top-right"][0]-H.bubblechart["padding-right"]-aa)/(ah-I);var ac=z["bottom-left"][1]-H.bubblechart["padding-bottom"];var R=(ac-z["top-left"][1]-H.bubblechart["padding-top"])/(u-Q);var ag=H.bubblechart["circle-min-radius"];var E=(H.bubblechart["circle-max-radius"]-ag)/(n-M);var r,af,D,X,F,C,T;var Z=[],J=[],o=[];for(ad=0;ad<ae.data.length;++ad){N=ae.data[ad];r=N[ae.horizontal_field];af=N[ae.vertical_field];D=N[ae.size_field];X=N[ae.label_field];F=H.color[(ad%H.color.length)];v=ag+D*E;Y=aa+r*G;V=ac-(af-Q)*R;C=m.circle(Y,V,v).attr({fill:F.color,"fill-opacity":F["light-alpha"],stroke:F.color,"stroke-opacity":F["dark-alpha"],"stroke-width":H.bubblechart["circle-border-width"]}).translate(0.5,0.5);T=m.text(Y,V,X).attr({fill:F.color,"font-size":H.bubblechart["label-size"],"text-anchor":"middle"}).translate(0.5,0.5);C.data("data",N);T.data("data",N);J.push(C);o.push(T);Z.push({label:X,color:F,type:"circle"});if(W&&typeof(W)==="function"){C.data("info",{x:Y,y:V,v_value:af,h_value:r,data:N});C.click(O);T.data("info",{x:Y,y:V,v_value:af,h_value:r,data:N});T.click(O)}if(ae.tooltip_title||ae.tooltip_content){var P=ae.tooltip_title;var w=ae.tooltip_content;for(var ab in N){P=P.replace("{"+ab+"}",N[ab]);w=w.replace("{"+ab+"}",N[ab])}C.data("tooltip",{id:ad,title:P,content:w,color:F,x:Y,y:V-v});C.hover(L);T.data("tooltip",{id:ad,title:P,content:w,color:F,x:Y,y:V-v});T.hover(L)}}c.draw_legend(m,z,Z,H);var B=(ac-z["top-left"][1]-H.bubblechart["padding-top"])/(H.bubblechart["vertical-label-count"]-1);var t=(u-Q)/(H.bubblechart["vertical-label-count"]-1);A=[];Y=z["top-left"][0]-H.bubblechart["vertical-bar-width"];V=ac;var s=Q;for(ad=0;ad<H.bubblechart["vertical-label-count"];++ad){A.push("M"+Y+","+V+"L"+z["top-left"][0]+","+V);m.path(A.join("")).attr({stroke:H.grid["axis-color"],"stroke-opacity":H.grid["axis-alpha"],"stroke-width":H.grid["axis-width"]}).translate(0.5,0.5);m.text(Y-H.bubblechart["vertical-bar-width"],V,s.toFixed(2)).attr({"text-anchor":"end",fill:H.grid["vertical-label-color"],"font-size":H.grid["vertical-label-size"]}).translate(0.5,0.5);V-=B;s+=t}var U=(z["top-right"][0]-H.bubblechart["padding-right"]-aa)/(H.bubblechart["vertical-label-count"]-1);var l=(ah-I)/(H.bubblechart["vertical-label-count"]-1);A=[];Y=aa;V=z["bottom-left"][1]+H.bubblechart["horizontal-bar-width"];var q=I;for(ad=0;ad<H.bubblechart["horizontal-label-count"];++ad){A.push("M"+Y+","+V+"L"+Y+","+z["bottom-left"][1]);m.path(A.join("")).attr({stroke:H.grid["axis-color"],"stroke-opacity":H.grid["axis-alpha"],"stroke-width":H.grid["axis-width"]}).translate(0.5,0.5);m.text(Y,V+H.bubblechart["horizontal-bar-width"]*2,q.toFixed(2)).attr({fill:H.grid["horizontal-label-color"],"font-size":H.grid["horizontal-label-size"]}).translate(0.5,0.5);Y+=U;q+=l}};c.draw_piechart=function(n,t,af,K,T,Q){if(!n||!af){return j("Paper or Data is empty.")}var I=g(K),u=[],W,S,ad,M,Y;var E=I.piechart["hole-radius"];var G=t["top-left"][0]+t.width/2+I.piechart["horizontal-offset"];var F=t["top-left"][1]+t.height/2+I.piechart["vertical-offset"];var N=function(p){T.call(Q,this.data("info"))};var L=function(p){W=this.data("tooltip")["x"];S=this.data("tooltip")["y"];c.draw_tooltip(n,W,S,this.data("tooltip")["id"],this.data("tooltip")["title"],this.data("tooltip")["content"],this.data("tooltip")["color"],I)};if(t.width>t.height){Y=Math.floor(t.height/2)*I.piechart["size-factor"]}else{Y=Math.floor(t.width/2)*I.piechart["size-factor"]}var q=-Infinity,P=Infinity,o=0;for(ad=0;ad<af.data.length;++ad){M=af.data[ad];if(M[af.value_field]>q){q=M[af.value_field]}if(M[af.value_field]<P){P=M[af.value_field]}o+=M[af.value_field]}var J=function(an,al,x,p,ao,ak,am){var ap=Math.PI/180,aj=an+x*Math.cos(-ao*ap),y=an+x*Math.cos(-ak*ap),ar=al+x*Math.sin(-ao*ap),aq=al+x*Math.sin(-ak*ap);B=an+p*Math.cos(-ao*ap),z=an+p*Math.cos(-ak*ap),ah=al+p*Math.sin(-ao*ap),ag=al+p*Math.sin(-ak*ap);if(p>0){return n.path(["M",B,ah,"L",aj,ar,"A",x,x,0,+(ak-ao>180),0,y,aq,"L",z,ag,"A",p,p,0,-(ak-ao>180),1,B,ah]).attr(am)}else{return n.path(["M",an,al,"L",aj,ar,"A",x,x,0,+(ak-ao>180),0,y,aq,"z"]).attr(am)}};var w=360/o;var A,r=0,H,aa=[],D=[],v=[],m;var C,ai,B,ah,z,ag,ac;var V,ab,U;var X=[];for(ad=0;ad<af.data.length;++ad){M=af.data[ad][af.value_field];A=w*M;H=I.color[(ad%I.color.length)];V=J(G,F,Y,E,r,r+A,{fill:H.color,"fill-opacity":H["light-alpha"],stroke:H.color,"stroke-opacity":H["dark-alpha"],"stroke-width":I.piechart["sector-border-width"]}).translate(0.5,0.5);V.data("color-alpha",H["light-alpha"]);V.data("index",ad);aa.push(V);if(T&&typeof(T)==="function"){V.data("info",{start:r,angle:A,value:af.data[ad][af.value_field],data:af.data[ad]});V.click(N)}X.push({label:af.data[ad][af.label_field],color:H,type:"sector"});m=-(r+A/2)*Math.PI/180;W=G+(Y+I.piechart["label-distance"])*Math.cos(m);S=F+(Y+I.piechart["label-distance"])*Math.sin(m);C=G+(Y+I.piechart["label-distance"]+I.piechart["label-bar-length1"])*Math.cos(m);ai=F+(Y+I.piechart["label-distance"]+I.piechart["label-bar-length1"])*Math.sin(m);if(W>G){B=C+I.piechart["label-bar-length2"]}else{B=C-I.piechart["label-bar-length2"]}ah=ai;u=[];u.push("M"+W+","+S);u.push("L"+C+","+ai);u.push("L"+B+","+ah);ab=n.path(u.join("")).attr({stroke:I.piechart["label-bar-color"],"stroke-opacity":I.piechart["label-bar-color"],"stroke-width":I.piechart["label-bar-width"]}).translate(0.5,0.5);D.push(ab);if(W>G){z=B+I.piechart["label-distance"];ac="start"}else{z=B-I.piechart["label-distance"];ac="end"}ag=ah;U=n.text(z,ag,af.data[ad][af.label_field]).attr({"text-anchor":ac,fill:H.color,"font-size":I.piechart["label-size"]}).translate(0.5,0.5);v.push(U);if(af.tooltip_title||af.tooltip_content){var O=af.tooltip_title;var s=af.tooltip_content;for(var Z in af.data[ad]){O=O.replace("{"+Z+"}",af.data[ad][Z]);s=s.replace("{"+Z+"}",af.data[ad][Z])}V.data("tooltip",{id:ad,title:O,content:s,color:H,x:G+(Y/2)*Math.cos(m),y:F+(Y/2)*Math.sin(m)});V.hover(L)}r+=A}c.draw_legend(n,t,X,I);var ae=Raphael.animation({transform:"s1.1 1.1 "+G+" "+F},I.layout["speed"],">");var R=Raphael.animation({transform:""},I.layout["speed"],"<");var l;for(ad=0;ad<aa.length;++ad){(function(p){p.mouseover(function(){ab=D[p.data("index")];if(ab){ab.stop().animate(ae)}U=v[p.data("index")];if(U){U.stop().animate(ae)}l=ae;l.anim["100"]["fill-opacity"]=1;p.stop().animate(l);delete l.anim["100"]["fill-opacity"]});p.mouseout(function(){ab=D[p.data("index")];if(ab){ab.stop().animate(R)}U=v[p.data("index")];if(U){U.stop().animate(R)}l=R;l.anim["100"]["fill-opacity"]=p.data("color-alpha");p.stop().animate(l);delete l.anim["100"]["fill-opacity"]})})(aa[ad])}};c.draw_radarchart=function(F,B,U,z,v,C){if(!F||!U){return j("Paper or Data is empty.")}var s=g(z),I=[],G=[],E,D,O,M,P,t,T=Math.PI/180;var q=B["top-left"][0]+B.width/2+s.radarchart["horizontal-offset"];var o=B["top-left"][1]+B.height/2+s.radarchart["vertical-offset"];var R=function(p){v.call(C,this.data("info"))};var r=function(p){E=this.data("tooltip")["x"];D=this.data("tooltip")["y"];c.draw_tooltip(F,E,D,this.data("tooltip")["id"],this.data("tooltip")["title"],this.data("tooltip")["content"],this.data("tooltip")["color"],s)};if(B.width>B.height){t=Math.floor(B.height/2)*s.radarchart["size-factor"]}else{t=Math.floor(B.width/2)*s.radarchart["size-factor"]}var m=0;var H=360/U.value_fields.length;var Q={},S={};for(O=0;O<U.value_fields.length;++O){Q[U.value_fields[O]]={v_max:-Infinity,v_min:Infinity};S[U.value_fields[O]]={angle:m};m+=H}for(O=0;O<U.data.length;++O){for(M=0;M<U.value_fields.length;++M){P=U.data[O][U.value_fields[M]];if(P>Q[U.value_fields[M]]["v_max"]){Q[U.value_fields[M]]["v_max"]=P}if(P<Q[U.value_fields[M]]["v_min"]){Q[U.value_fields[M]]["v_min"]=P}}}F.circle(q,o,t).attr({stroke:s.radarchart["outer-border-color"],"stroke-width":s.radarchart["outer-border-width"],"stroke-opacity":s.radarchart["outer-border-alpha"],fill:s.radarchart["outer-background-color"],"fill-opacity":s.radarchart["outer-background-alpha"]}).translate(0.5,0.5);I=[];G=[];var n=0;for(O=0;O<U.value_fields.length;++O){if(O===0){I.push("M")}else{I.push("L")}E=q+t*Math.sin(S[U.value_fields[O]]["angle"]*T);D=o-t*Math.cos(S[U.value_fields[O]]["angle"]*T);S[U.value_fields[O]]["end-x"]=E;S[U.value_fields[O]]["end-y"]=D;I.push(E+","+D);G.push("M"+q+","+o+"L"+E+","+D);E=q+(t+s.radarchart["label-distance"])*Math.sin(S[U.value_fields[O]]["angle"]*T);D=o-(t+s.radarchart["label-distance"])*Math.cos(S[U.value_fields[O]]["angle"]*T);S[U.value_fields[O]]["label-x"]=E;S[U.value_fields[O]]["label-y"]=D;if(s.radarchart["label-rotation"]){n=S[U.value_fields[O]]["angle"];if(S[U.value_fields[O]]["angle"]>90&&S[U.value_fields[O]]["angle"]<270){n+=180}}F.text(E,D,U.value_fields[O]).attr({"font-size":s.radarchart["label-size"],fill:s.radarchart["label-color"],transform:"r"+n}).translate(0.5,0.5);Q[U.value_fields[O]]["v_unit"]=(t-s.radarchart["circle-min-radius"])/(Q[U.value_fields[O]]["v_max"]-Q[U.value_fields[O]]["v_min"])}I.push("z");F.path(I.join("")).attr({stroke:s.radarchart["inner-border-color"],"stroke-width":s.radarchart["inner-border-width"],"stroke-opacity":s.radarchart["inner-border-alpha"],fill:s.radarchart["inner-background-color"],"fill-opacity":s.radarchart["inner-background-alpha"]}).translate(0.5,0.5);F.path(G.join("")).attr({stroke:s.radarchart["axis-color"],"stroke-width":s.radarchart["axis-width"],"stroke-opacity":s.radarchart["axis-alpha"]}).translate(0.5,0.5);var J=0,A,w,l=[],N,u=[];for(O=0;O<U.data.length;++O){A=s.color[(O%s.color.length)];I=[];for(M=0;M<U.value_fields.length;++M){w=U.data[O][U.value_fields[M]];J=s.radarchart["circle-min-radius"]+Q[U.value_fields[M]]["v_unit"]*(w-Q[U.value_fields[M]]["v_min"]);if(!J){continue}if(M===0){I.push("M")}else{I.push("L")}E=q+J*Math.sin(S[U.value_fields[M]]["angle"]*T);D=o-J*Math.cos(S[U.value_fields[M]]["angle"]*T);I.push(E+","+D)}I.push("z");N=F.path(I.join("")).attr({stroke:A.color,"stroke-width":s.radarchart["circle-border-width"],"stroke-opacity":A["dark-alpha"],fill:A.color,"fill-opacity":s.radarchart["circle-background-alpha"]}).translate(0.5,0.5);N.data("color-alpha",s.radarchart["circle-background-alpha"]);l.push(N);if(U.data[O][U.name_field]){u.push({label:U.data[O][U.name_field],color:A,type:"circle"})}if(v&&typeof(v)==="function"){K.data("info",{name:U.data[O][U.name_field],data:U.data[O]});K.click(R)}if(U.tooltip_title||U.tooltip_content){var V=U.tooltip_title;var L=U.tooltip_content;for(var K in U.data[O]){V=V.replace("{"+K+"}",U.data[O][K]);L=L.replace("{"+K+"}",U.data[O][K])}N.data("tooltip",{id:O,title:V,content:L,color:A,x:E,y:D});N.hover(r)}}c.draw_legend(F,B,u,s);for(O=0;O<l.length;++O){(function(p){p.mouseover(function(){p.animate({"fill-opacity":0.618},s.layout["speed"],"<")});p.mouseout(function(){p.animate({"fill-opacity":p.data("color-alpha")},s.layout["speed"],">")})})(l[O])}};c.draw_radialchart=function(o,z,af,M,V,S){if(!o||!af){return j("Paper or Data is empty.")}var L=g(M),A=[],X,U,ad,O,Z,r=Math.PI/180;var H=L.radialchart["hole-radius"];var J=z["top-left"][0]+z.width/2+L.radialchart["horizontal-offset"];var I=z["top-left"][1]+z.height/2+L.radialchart["vertical-offset"];var P=function(p){V.call(S,this.data("info"))};var N=function(p){X=this.data("tooltip")["x"];U=this.data("tooltip")["y"];c.draw_tooltip(o,X,U,this.data("tooltip")["id"],this.data("tooltip")["title"],this.data("tooltip")["content"],this.data("tooltip")["color"],L)};if(z.width>z.height){Z=Math.floor(z.height/2)*L.radialchart["size-factor"]}else{Z=Math.floor(z.width/2)*L.radialchart["size-factor"]}var s=-Infinity,R=Infinity,q=0;for(ad=0;ad<af.data.length;++ad){O=af.data[ad];if(O[af.value_field]>s){s=O[af.value_field]}if(O[af.value_field]<R){R=O[af.value_field]}q+=O[af.value_field]}var C=360/af.data.length;var t=(Z-H-L.radialchart["bar-min-height"])/(s-R);var v=0,K,ai=[],G=[],B=[];var F,aj,E,ah,D,ag,ac,n;var u,ab,W;var Y=[];for(ad=0;ad<af.data.length;++ad){O=af.data[ad][af.value_field];n=H+L.radialchart["bar-min-height"]+t*(O-R);K=L.color[(ad%L.color.length)];A=[];X=J+H*Math.cos(v*r);U=I+H*Math.sin(v*r);A.push("M"+X+","+U);X=J+n*Math.cos(v*r);U=I+n*Math.sin(v*r);A.push("L"+X+","+U);X=J+n*Math.cos((v+L.radialchart["bar-width"])*r);U=I+n*Math.sin((v+L.radialchart["bar-width"])*r);A.push("L"+X+","+U);X=J+H*Math.cos((v+L.radialchart["bar-width"])*r);U=I+H*Math.sin((v+L.radialchart["bar-width"])*r);A.push("L"+X+","+U);A.push("Z");u=o.path(A.join("")).attr({fill:K.color,"fill-opacity":K["light-alpha"],stroke:K.color,"stroke-opacity":K["dark-alpha"],"stroke-width":L.radialchart["bar-border-width"]}).translate(0.5,0.5);u.data("color-alpha",K["light-alpha"]);u.data("index",ad);ai.push(u);if(V&&typeof(V)==="function"){u.data("info",{start:v,angle:L.radialchart["bar-width"],value:af.data[ad][af.value_field],data:af.data[ad]});u.click(P)}Y.push({label:af.data[ad][af.label_field],color:K,type:"box"});var m=v+L.radialchart["bar-width"]/2;if(L.radialchart["label-enabled"]){X=J+(Z+L.radialchart["label-distance"])*Math.cos(m*r);U=I+(Z+L.radialchart["label-distance"])*Math.sin(m*r);F=J+(Z+L.radialchart["label-distance"]+L.radialchart["label-bar-length1"])*Math.cos(m*r);aj=I+(Z+L.radialchart["label-distance"]+L.radialchart["label-bar-length1"])*Math.sin(m*r);if(X>J){E=F+L.radialchart["label-bar-length2"]}else{E=F-L.radialchart["label-bar-length2"]}ah=aj;A=[];A.push("M"+X+","+U);A.push("L"+F+","+aj);A.push("L"+E+","+ah);ab=o.path(A.join("")).attr({stroke:L.radialchart["label-bar-color"],"stroke-opacity":L.radialchart["label-bar-color"],"stroke-width":L.radialchart["label-bar-width"]}).translate(0.5,0.5);G.push(ab);if(X>J){D=E+L.radialchart["label-distance"];ac="start"}else{D=E-L.radialchart["label-distance"];ac="end"}ag=ah;W=o.text(D,ag,af.data[ad][af.label_field]).attr({"text-anchor":ac,fill:K.color,"font-size":L.radialchart["label-size"]}).translate(0.5,0.5);B.push(W)}if(af.tooltip_title||af.tooltip_content){var Q=af.tooltip_title;var w=af.tooltip_content;for(var aa in af.data[ad]){Q=Q.replace("{"+aa+"}",af.data[ad][aa]);w=w.replace("{"+aa+"}",af.data[ad][aa])}u.data("tooltip",{id:ad,title:Q,content:w,color:K,x:J+Z/2*Math.cos(m*r),y:I+Z/2*Math.sin(m*r)});u.hover(N)}v+=C}c.draw_legend(o,z,Y,L);var ae=Raphael.animation({transform:"s1.1 1.1 "+J+" "+I},L.layout["speed"],">");var T=Raphael.animation({transform:""},L.layout["speed"],"<");var l;for(ad=0;ad<ai.length;++ad){(function(p){p.mouseover(function(){ab=G[p.data("index")];if(ab){ab.stop().animate(ae)}W=B[p.data("index")];if(W){W.stop().animate(ae)}l=ae;l.anim["100"]["fill-opacity"]=1;p.stop().animate(l);delete l.anim["100"]["fill-opacity"]});p.mouseout(function(){ab=G[p.data("index")];if(ab){ab.stop().animate(T)}W=B[p.data("index")];if(W){W.stop().animate(T)}l=T;l.anim["100"]["fill-opacity"]=p.data("color-alpha");p.stop().animate(l);delete l.anim["100"]["fill-opacity"]})})(ai[ad])}};c.draw_smithgraph=function(n,u,s,m){if(!n||!s){return j("Paper or Data is empty.")}var C=g(m),l=[],t=[],A,z,r,q,B,v,w=Math.PI/180;var p=u["top-left"][0]+u.width/2+C.smithgraph["horizontal-offset"];var o=u["top-left"][1]+u.height/2+C.smithgraph["vertical-offset"];if(u.width>u.height){v=Math.floor(u.height/2)*C.smithgraph["size-factor"]}else{v=Math.floor(u.width/2)*C.smithgraph["size-factor"]}};c.draw_heatmap=function(B,v,S,t,r,w){if(!B||!S){return j("Paper or Data is empty.")}var n=g(t),C=[],A,z,L,K,O;var P=function(p){r.call(w,this.data("info"))};var m=function(p){A=this.data("tooltip")["x"];z=this.data("tooltip")["y"];c.draw_tooltip(B,A,z,this.data("tooltip")["id"],this.data("tooltip")["title"],this.data("tooltip")["content"],this.data("tooltip")["color"],n)};var J=-Infinity,F=Infinity;for(L=0;L<S.data.length;++L){O=S.data[L];if(O[S.value_field]>J){J=O[S.value_field]}if(O[S.value_field]<F){F=O[S.value_field]}}var q=1,o=1;if(n.heatmap["horizontal-count"]>0){q=n.heatmap["horizontal-count"];o=Math.ceil(S.data.length/q)}else{if(n.heatmap["vertical-count"]>0){o=n.heatmap["vertical-count"];q=Math.ceil(S.data.length/o)}else{q=Math.floor(Math.sqrt(S.data.length));o=q}}var N=1,M=1;N=(v.width-((q-1)*n.heatmap["horizontal-margin"]))/q;M=(v.height-((o-1)*n.heatmap["vertical-margin"]))/o;var u,Q,s,l,R;if(n.heatmap["color"]&&n.heatmap["color"].length>0){Q=n.heatmap["color"]}else{Q=n.color}z=v["top-left"][1];index=0;var D=false,H=[],G=[];R=undefined;for(K=0;K<o;++K){A=v["top-left"][0];for(L=0;L<q;++L){if(!S.data[index]){D=true;break}s=S.data[index][S.value_field];u=Q[Math.floor((s-F)*((Q.length-1)/(J-F)))];l=B.rect(A,z,N,M).attr({fill:u.color,"fill-opacity":u["dark-alpha"],stroke:u.color,"stroke-opacity":u["dark-alpha"],"stroke-width":n.heatmap["box-border-width"]}).translate(0.5,0.5);H.push(l);if(N>n.heatmap["label-size"]&&M>n.heatmap["label-size"]){R=B.text(A+N/2,z+M/2,S.data[index][S.label_field]).attr({fill:n.heatmap["label-color"],"fill-opacity":n.heatmap["label-alpha"],"font-size":n.heatmap["label-size"]}).translate(0.5,0.5);G.push(R)}if(r&&typeof(r)==="function"){l.data("info",{x:A,y:z,data:S.data[index]});R.data("info",{x:A,y:z,data:S.data[index]});l.click(P);R.click(P)}if(S.tooltip_title||S.tooltip_content){var T=S.tooltip_title;var I=S.tooltip_content;for(var E in S.data[index]){T=T.replace("{"+E+"}",S.data[index][E]);I=I.replace("{"+E+"}",S.data[index][E])}l.data("tooltip",{id:index,title:T,content:I,color:u,x:A+N/2,y:z});l.hover(m);if(R){R.data("tooltip",{id:index,title:T,content:I,color:u,x:A+N/2,y:z});R.hover(m)}}A+=N+n.heatmap["horizontal-margin"];++index}if(D){break}z+=M+n.heatmap["vertical-margin"]}};c.draw_tagcloud=function(m,C,ad,M,X,U){if(!m||!ad){return j("Paper or Data is empty.")}var L=g(M),D=[],Y,W,ab,aa,O;var E=L.tagcloud["levels"]?L.tagcloud["levels"]:8;var P=function(p){X.call(U,this.data("info"))};var N=function(p){Y=this.data("tooltip")["x"];W=this.data("tooltip")["y"];c.draw_tooltip(m,Y,W,this.data("tooltip")["id"],this.data("tooltip")["title"],this.data("tooltip")["content"],this.data("tooltip")["color"],L)};var v=-Infinity,S=Infinity,u=0;for(ab=0;ab<ad.data.length;++ab){O=ad.data[ab];if(O[ad.value_field]>v){v=O[ad.value_field]}if(O[ad.value_field]<S){S=O[ad.value_field]}u+=O[ad.text_field].length}var o=[],q,l,A;for(ab=0;ab<ad.data.length;++ab){O=ad.data[ab];q=Math.floor((E-1)*(O[ad.value_field]-S)/(v-S));this_size=L.tagcloud["text-min-size"]+Math.floor(q*(L.tagcloud["text-max-size"]-L.tagcloud["text-min-size"])/E);l=m.text(-1000,-1000,O[ad.text_field]).attr({"font-size":this_size}).translate(0.5,0.5);A=l.getBBox();o.push({value:O[ad.value_field],text:O[ad.text_field],size:this_size,length:O[ad.text_field].length,level:q,width:A.width,height:A.height,index:ab})}var G=C["top-left"][0]+C.width/2;var F=C["top-left"][1]+C.height/2;var ac=L.tagcloud["row-count"],T=[];for(ab=0;ab<ac;++ab){T.push({node:[]})}if(ac%2===0){F-=L.tagcloud["text-max-size"]/2}o.sort(function(x,p){return p.size-x.size});for(ab=0;ab<o.length;++ab){T[ab%T.length]["node"].push(o[ab])}var r=[],V,ae=[];var n=0,K,J,z,w,I,H;var t,s,R=0;for(ab=0;ab<T.length;++ab){if(ab===0){Y=G;W=F;K=W;J=W}else{Y=G;if(ab%2===0){W=K-n;K=W}else{W=J+n;J=W}}z=0;w=0;I=0;H=0;n=-Infinity;for(aa=0;aa<T[ab]["node"].length;++aa){O=T[ab]["node"][aa];this_color=L.tagcloud["color"][Math.floor((L.tagcloud["color"].length-1)*(O.level/(E-1)))];if(aa===0){t=Y;s=W;I=O.width+L.tagcloud["horizontal-margin"];H=O.width+L.tagcloud["horizontal-margin"]}else{if(aa%2===0){z-=I/2+O.width/2;t=Y+z;I=O.width+L.tagcloud["horizontal-margin"]}else{w+=H/2+O.width/2;t=Y+w;H=O.width+L.tagcloud["horizontal-margin"]}}if(O.height>n){n=O.height+L.tagcloud["vertical-margin"]}ae.push({x:t,y:s,item:O,color:this_color,data:ad.data[O.index]});R++}}for(ab=ae.length-1;ab>=0;--ab){V=m.text(ae[ab]["x"],ae[ab]["y"],ae[ab]["item"]["text"]).attr({"font-size":ae[ab]["item"]["size"],fill:ae[ab]["color"]["color"],"fill-opacity":ae[ab]["color"]["dark-alpha"],"text-anchor":"middle"}).translate(0.5,0.5);r.push(V);if(X&&typeof(X)==="function"){V.data("info",{data:ae[ab]["data"],item:ae[ab]["item"],x:ae[ab]["x"],y:ae[ab]["y"]});V.click(P)}if(ad.tooltip_title||ad.tooltip_content){var Q=ad.tooltip_title;var B=ad.tooltip_content;for(var Z in ae[ab]["data"]){Q=Q.replace("{"+Z+"}",ae[ab]["data"][Z]);B=B.replace("{"+Z+"}",ae[ab]["data"][Z])}V.data("tooltip",{id:ab,title:Q,content:B,color:this_color,x:ae[ab]["x"],y:ae[ab]["y"]});V.hover(N)}}for(ab=0;ab<r.length;++ab){(function(p){p.mouseover(function(){p.animate({transform:"s1.5"},L.layout["speed"],">")});p.mouseout(function(){p.animate({transform:""},L.layout["speed"],"<")})})(r[ab])}};var f=function(m,n){if(typeof(n)==="object"&&(n instanceof Array)){for(var l=0;l<n.length;++l){if(m==n[l]){return l}}}return -1};var g=function(m){if(!m){return c.options}var l={},o,n;for(o in c.options){if(typeof(c.options[o])==="object"&&(c.options[o] instanceof Array)){l[o]=[]}else{l[o]={}}for(n in c.options[o]){l[o][n]=c.options[o][n]}}for(o in m){for(n in m[o]){l[o][n]=m[o][n]}}return l};var b=function(m){var l=g(m);if(h){var p=h;p.stop();p.animate({opacity:0},l.layout["speed"],function(){p.remove();delete p})}if(k){var n=k;n.stop();n.animate({opacity:0},l.layout["speed"],function(){n.remove();delete n})}if(a){var o=a;o.stop();o.animate({opacity:0},l.layout["speed"],function(){o.remove();delete o})}};var i=function(m){var l=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};if(m==="long"){return(l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l())}else{return(l()+l())}};var j=function(l){if(console&&typeof(console.log)==="function"){console.log(l)}else{alert(l)}};c.global_option=function(l){c.options=g(l)};c.version=function(){return"0.1.0"};c.enable_logo=function(){c.options.layout["logo-enabled"]=true};window.InfoViz=c})();